<dom-module id="saint-laurent-station">
  <style type="text/css">
    :host {
      display: block;
      position: relative;
      margin: 0px;
      padding: 10px;
    }

    .station {
      @apply(--layout-horizontal);
      @apply(--layout-center);
    }
    .badge {
    }
    .times {
      @apply(--layout-vertical);
      padding-left: 10px;
    }

    .inner-time {
        margin: 1px;
        @apply(--layout-horizontal);
    }

  </style>
  <template>
    <iron-ajax
      id="keolisApi"
      auto
      handle-as="json"
      last-response="{{resp}}"
      url="/api/2.0"
      >
    </iron-ajax>

    <div class="station">
      <div class="times">
        <template is="dom-repeat" items="[[resp.departures]]" as="item">
          <div class="inner-time">
            <saint-laurent-mini-badge label$="[[label]]" color$="[[color]]"></saint-laurent-mini-badge>
            &nbsp;
            <saint-laurent-time-new time$="[[item]]"></saint-laurent-time-new>
          </div>
        </template>
      </div>
    </div>

  </template>
</dom-module>

<script>
  Polymer({
    is: "saint-laurent-station",

    properties:{
      resp: {
        type: Object
      },
      stopId: {
        type: String
      },
      routeId: {
        type: String
      },
      directionId: {
        type: String
      },
      label: {
        type: String
      }
    },

    ready: function() {
         // this.$.keolisApi.url = "/api/" + this.stopId + "/" + this.routeId + "/" + this.directionId;
         this.$.keolisApi.params = {
          "stop": this.stopId ,
          "route": this.routeId,
          "direction": this.directionId
        };
    }

  });
</script>
